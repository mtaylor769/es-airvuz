<!DOCTYPE html>
<html view="app.views.view.template.videoPlayer">
    <head>
        <meta http-equiv="Cache-control" content="public">
        <title>AirVūz - {video.title}</title>

        <meta property="og:url" content="//airvuz.com/video/{video.videoPath}"/>
        <meta property="og:type" content="video.other">
        <meta property="og:title" content="{video.title}" >
        <meta property="og:updated_time" content="{video.uploadDate}">
        <meta property="og:description" content="{video.description}" >
        <meta property="og:image" content="https:{s3Bucket}{video.thumbnailPath}" >
        <meta property="fb:app_id" content="{facebookAppId}">

        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:site" content="@airvuz" />
        <meta name="twitter:creator" content="@airvuz" />
        <meta name="twitter:url" content="http://beta2.airvuz.com/video/{video.videoPath}" />
        <meta name="twitter:title" content="{video.title}" />
        <meta name="twitter:description" content="{video.description}" />
        <meta name="twitter:image" content="https:{s3Bucket}{video.thumbnailPath}" />

        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="icon" href="/client/favicon.ico" type="image/x-icon">
        <link rel="stylesheet" href="/public/{airvuz.css}">
    </head>
    <body>
        {> "app.views.view.partial.header" /}
        <div class="video-page">
            <div class="container main">
                <div class="row">
                    <div class="col-sm-8 videoplayback">
                        {!video title and back button!}
                        <div class="video-player-header flex">
                            <span class="glyphicon glyphicon-menu-left page-back"></span>
                            <span class="video-player-title airvuz-blue">{video.title}</span>
                            <div class="up-next">
                                <span class="up">UP NEXT</span>
                                <span class="glyphicon glyphicon-arrow-right"></span>
                            </div>
                        </div>
                        {!video player!}
                        <div>
                            <video id="video-player" class="video-js vjs-big-play-centered vjs-fullscreen video-player"
                                   controls preload="auto" autoplay style="position: relative; width: 100%; height: 100%"
                                   poster="{s3Bucket}{video.thumbnailPath}">
                            </video>
                        </div>
                        {!categories!}
                        <div class="video-player-categories">
                            <div class="row">
                                <div class="col-xs-12">
                                    <ul class="list-inline categories">
                                        {#video.categories}
                                            <li><a href="/category/{categoryTypeUrl}">{name}</a></li>
                                        {/video.categories}
                                    </ul>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12">
                                    <div class="description-container">
                                        <div id="video-description" style="margin: 10px 20px;">
                                            <div>
                                                {video.description|s}
                                            </div>
                                            <div class="upload-date">
                                                Uploaded: {video.displayDate}
                                            </div>
                                        </div>
                                        <div class="show-more-description">
                                            <span class="glyphicon glyphicon-chevron-down invisible"></span>
                                        </div>
                                        <div class="show-less-description" style="display: none">
                                            <span class="glyphicon glyphicon-chevron-up"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {!video owner info!}
                        <div class="flex video-user-info-height" style="background: #fafafa;">
                            <button class="btn background-orange border-radius-0 font-white add-button" id="follow" data-toggle="tooltip" data-placement="right" title="Follow / Unfollow">+</button>
                                <img src="{user.profilePicture}" alt="profile picture" height="50" width="50" class="border-radius-circle video-user-picture">
                            <div class="video-user-about t-a-inherit">
                                <p class="m-b-0 bold"><a class="airvuz-blue videoUserName" href="/user/{user.userNameUrl}">{user.userNameDisplay}</a></p>
                                <p class="m-b-0"><span class="airvuz-blue bold">{videoCount} </span>Videos</p>
                                <p class="m-b-0"><span class="airvuz-blue bold">{followCount} </span>followers</p>
                            </div>
                            <div class="video-slick">
                                {#topVideos}
                                    <div class="video">
                                        <a href="/videoPlayer/{_id}">
                                            <img data-lazy="{s3Bucket}{thumbnailPath}" alt="{imageAlt}" class="img-responsive" />
                                        </a>
                                    </div>
                                {/topVideos}
                            </div>
                        </div>
                        {!comments!}
                        <div class="gainsboro-background p-15-0">
                            <div class="inline m-l-10">
                                <span class="p-l-10"><span class="bold airvuz-blue">VŪZ</span> {video.viewCount} |  </span>
                                <span class="bold">  Likes </span><span class="like-count">{video.likeCount} </span>
                                <span class="bold hidden-xs">| Comments</span><span class="hidden-xs comment-count"> {video.commentCount} </span>
                            </div>
                            <div class="video-action-icons pull-right flex">
                                <span class="glyphicon glyphicon-heart like pointer" data-videoId="{video._id}" data-toggle="tooltip" data-placement="top" title="Like this video"></span>
                                <span class="glyphicon glyphicon-flag report pointer" data-toggle="tooltip" data-placement="top" title="Report this video"></span>
                                <span class="glyphicon glyphicon-share share pointer" data-toggle="tooltip" data-placement="bottom" title="Social media share"></span>
                                <div  class="social-icons" style="position: absolute; display: none; right: 0; width: 55px;height: auto; bottom: 33px; background: #2b2e38">
                                    <span class="fa fa-code social embed pointer" data-toggle="tooltip" data-placement="right" title="Embedable code"></span>
                                    <a href="https://plus.google.com/share?url=http://airvuz.com/video/{video._id}" class="fa fa-google-plus-square social" id="google" data-toggle="tooltip" data-placement="right" title="Share on Google+"></a>
                                    <a href="https://twitter.com/intent/tweet?url=http://airvuz.com/video/{video._id}&text={video.title}&via=airvuz" class="fa fa-twitter-square social" id="twitter" data-toggle="tooltip" data-placement="right" title="Share on Twitter"></a>
                                    <span class="fa fa-facebook-official social pointer" id="facebook" data-toggle="tooltip" data-placement="right" title="Share on Facebook"></span>
                                </div>
                            </div>
                        </div>
                        <div class="flex write-comment" style="width: 100%; background: #fafafa;">
                            <textarea cols="90" rows="1" id="comment-text" placeholder="Post a comment..."></textarea>
                            <button class="btn background-orange border-radius-0 font-white" value="{video._id}" id="commentSave">Comment</button>
                        </div>
                        <ul class="parent-comments">
                        {#comments}
                            <li class="comment-wrap" data-userId="{userId._id}">
                                <div class="row">
                                    <div class="m-t-5">
                                        <a href="/user/{userId.userNameUrl}" class="col-xs-2 col-md-1">
                                            <img src="{userId.profilePicture}" alt="profile picture" height="50" width="50" class="border-radius-circle m-10-20">
                                        </a>
                                        <p class="pos-absolute-r-15" datetime="{commentCreatedDate}">{commentDisplayDate}</p>
                                        <div class="col-xs-9 col-md-10 posted-comment-text">
                                            <p class="m-b-0"><a href="/user/{userId.userNameUrl}" class="airvuz-blue">{userId.userNameDisplay}</a></p>
                                            <p class="m-b-0">{comment}</p>
                                        </div>
                                    </div>
                                </div>
                                <ul class="parentComment"></ul>
                                <div  id="{_id}" data-userId="{userId._id}">
                                    <div class="row">
                                        <div class="reply col-xs-3 col-sm-2 pointer" value="{_id}" data-userId="{userId._id}" style="padding: 0 0 0 10px">
                                            <span class="glyphicon glyphicon-share-alt" style="margin: 0 0 0 30px; transform: scaleY(-1);"></span>
                                            <span style="font-size: 10px; margin-left: 2px">reply</span>
                                        </div>
                                        <div class="col-xs-3 col-md-2 commentReplies pointer" value="{_id}">
                                            <span style="margin: 0; padding: 0 0 0 10px; font-size: 10px;"><a>replies {replyCount}</a></span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        {/comments}
                        </ul>
                    </div>
                    {!up next video list!}
                    <div class="col-sm-4 nextVideos mobile-display-none" id="next">
                        <div class="flex">
                            <div class="videoback">
                                <span class="glyphicon glyphicon-arrow-left"></span>
                                <span class="up">VIDEO PLAYER</span>
                            </div>
                            <h5 class="up-tag">UP NEXT</h5>
                            <div class="auto-play">
                                <h5>AutoPlay</h5>
                                <input type="checkbox" name="auto-play-input" id="auto-play" checked>
                            </div>
                        </div>
                        <ul style="list-style: none; padding-left: 0">
                        {#upNext}
                            <li style="width: 100%; position: relative" class="go-to-video" value="{_id}" data-title="{fullTitle}">
                                <div class="up-next-wrapper">
                                    <a href="{_id}"><img src="{s3Bucket}{thumbnailPath}" width="100%" class="m-t-10"></a>
                                    <div class="up-next-layer">
                                        <a href="{_id}"><p class="font-white m-l-15 up-next-title">{title}</p></a>
                                        <div class="flex up-next-subs">
                                            <p class="font-white m-l-15"><span class="airvuz-blue">VŪZ</span> {viewCount} | {displayDate}</p>
                                            <p class="font-white pos-absolute-r-15">{duration}</p>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        {/upNext}
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        {> "client.templates.videoPlayer.videoPlayerModal" /}
        {> "app.views.view.partial.footer" /}

        <div id="fb-root"></div>

        <script type="text/javascript" async src="https://platform.twitter.com/widgets.js"></script>
        {> "app.views.view.partial.js" /}
        <script>
            var video = {?video}{video|js|s}{:else}[]{/video};
            $(function() {
                videoPlayer.initialize('{s3Bucket}{video.videoPath}', '{facebookAppId}');
            });
        </script>
    </body>
    
</html>
